/* ==================================================================
   通用徽章系统 (Badges v2)
   设计目标：
   1. 单一基础类 .badge + data-属性/修饰类控制变体
   2. 语义色 (success/info/warning/danger/neutral/primary/secondary/purple...)
   3. 外观风格 (soft | solid | outline | subtle | ghost | gradient)
   4. 尺寸 (xs / sm / md / lg) 与形状 (pill / round / square) 可组合
   5. 暗色模式自动调和；高对比度可加强
   6. 可自定义 data-rgb="r g b" 覆盖颜色主色
   7. 纯 CSS 无需额外组件即可 Markdown 内复用
   ================================================================== */

/* ==================================================================
   写法示例：
   <span class="badge">默认灰</span>
   <span class="badge badge--blue">蓝色</span>
   <span class="badge" data-variant="lime">青柠</span>
   <span class="badge badge--ivory" data-appearance="subtle">象牙白</span>
   <span class="badge" data-variant="green" data-size="xs">XS</span>
   <span class="badge" data-variant="green" data-size="sm">SM</span>
   <span class="badge" data-variant="green" data-size="lg" data-shape="square">LG</span>
   <span class="badge badge--blue badge--round">Round</span>
   <span class="badge badge--blue badge--pill">Pill</span>

/* ================= 基础色板 (RGB) ================= */
:root {
  /* 按颜色命名，方便直觉使用 */
  --badge-blue: 64 158 255;      /* #409EFF */
  --badge-blue-alt: 56 149 255;  /* #3895FF 深一点 */
  --badge-purple: 155 108 255;   /* #9B6CFF */
  --badge-green: 74 201 155;     /* #4AC99B 薄荷绿 */
  --badge-lime: 141 199 63;      /* #8DC73F 偏黄绿（Entry） */
  --badge-orange: 255 171 25;    /* #FFAB19 */
  --badge-red: 235 87 87;        /* #EB5757 (Exit / 警示) */
  --badge-gray: 130 130 130;     /* #828282 中性灰 */
  --badge-black: 0 0 0;          /* 纯黑 (Black variant) */
  --badge-white: 255 255 255;    /* 纯白 (White variant) */
  --badge-white-soft: 236 236 236; /* #ECECEC 暗色模式柔和白 */
}

/* ================ 基础结构 ================ */
.badge {
  --_c: var(--badge-gray);           /* 主色 RGB 默认灰 */
  --_bg-a: .16;                      /* 渐变前景层透明度 A */
  --_bg-b: .06;                      /* 渐变后景层透明度 B */
  --_txt-alpha: 1;                   /* 文本不透明度 */
  --_outline-alpha: .35;             /* 外描边 */
  --_shadow-alpha: .25;              /* 阴影扩散 */
  --_ring-size: 0px;                 /* 焦点 ring */
  display: inline-flex;
  align-items: center;
  gap: .4em;
  font-family: var(--vp-font-family-mono, monospace);
  font-weight: 600;
  font-size: 12px;
  line-height: 1.1;
  padding: 2px 8px;
  border-radius: 999px; /* pill 默认 */
  position: relative;
  white-space: nowrap;
  user-select: none;
  cursor: default;
  border: 1px solid transparent;
  background: linear-gradient(135deg, rgb(var(--_c) / var(--_bg-a)), rgb(var(--_c) / var(--_bg-b)));
  color: rgb(var(--_c) / var(--_txt-alpha));
  box-shadow: 0 0 0 1px rgb(var(--_c) / var(--_outline-alpha)), 0 2px 4px -1px rgb(var(--_c) / var(--_shadow-alpha));
  backdrop-filter: saturate(160%) blur(8px);
  -webkit-backdrop-filter: saturate(160%) blur(8px);
  transition: background .25s ease, box-shadow .25s ease, color .25s ease, border-color .25s ease;
}

/* ================ 颜色变体（类） ================ */
.badge--blue      { --_c: var(--badge-blue); }
.badge--blue-alt  { --_c: var(--badge-blue-alt); }
.badge--purple    { --_c: var(--badge-purple); }
.badge--green     { --_c: var(--badge-green); }
.badge--lime      { --_c: var(--badge-lime); }
.badge--orange    { --_c: var(--badge-orange); }
.badge--red       { --_c: var(--badge-red); }
.badge--gray      { --_c: var(--badge-gray); }
.badge--black     { --_c: var(--badge-black); color: #fff; }
.badge--white     { --_c: var(--badge-white); color: #1d1d1f; }

/* ================ 颜色变体（data-variant） ================ */
.badge[data-variant="blue"]      { --_c: var(--badge-blue); }
.badge[data-variant="blue-alt"]  { --_c: var(--badge-blue-alt); }
.badge[data-variant="purple"]    { --_c: var(--badge-purple); }
.badge[data-variant="green"]     { --_c: var(--badge-green); }
.badge[data-variant="lime"]      { --_c: var(--badge-lime); }
.badge[data-variant="orange"]    { --_c: var(--badge-orange); }
.badge[data-variant="red"]       { --_c: var(--badge-red); }
.badge[data-variant="gray"]      { --_c: var(--badge-gray); }
.badge[data-variant="black"]     { --_c: var(--badge-black); color: #fff; }
.badge[data-variant="white"]     { --_c: var(--badge-white); color: #1d1d1f; }

/* Black 变体在任何外观下统一白字 */
.badge--black.badge--solid,
.badge--black[data-appearance="solid"],
.badge[data-variant="black"].badge--solid,
.badge[data-variant="black"][data-appearance="solid"] { color:#fff; }

/* White 变体：默认 soft/subtle 场景下做淡投影与描边，solid 用黑字，outline 使用浅灰描边 */
.badge--white:not(.badge--outline):not(.badge--ghost):not(.badge--gradient),
.badge[data-variant="white"]:not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]) {
  background: linear-gradient(135deg,#ffffff,#f5f5f5);
  box-shadow: 0 0 0 1px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.15);
  border: 1px solid rgba(0,0,0,.10);
}
.badge--white.badge--solid,
.badge[data-variant="white"][data-appearance="solid"] {
  background: #fff;
  box-shadow: 0 0 0 1px rgba(0,0,0,.12),0 2px 6px -2px rgba(0,0,0,.2);
}
.badge--white.badge--outline,
.badge[data-variant="white"][data-appearance="outline"] {
  background: transparent;
  border-color: rgba(0,0,0,.25);
  color: #1d1d1f;
}
.badge--white.badge--ghost,
.badge[data-variant="white"][data-appearance="ghost"] { background: transparent; color:#ececec; }
.badge--white.badge--ghost:hover,
.badge[data-variant="white"][data-appearance="ghost"]:hover { background: rgba(255,255,255,.08); color:#fff; }

/* 深色模式下微降白度防刺眼 */
.dark .badge--white:not(.badge--outline):not(.badge--ghost):not(.badge--gradient),
.dark .badge[data-variant="white"]:not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]) {
  /* 使用柔和白，减低强对比 + 轻磨砂质感 */
  --_c: var(--badge-white-soft);
  background: linear-gradient(135deg, rgb(var(--badge-white-soft) / .92), rgb(var(--badge-white-soft) / .82));
  color:#161616;
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 0 0 1px rgba(255,255,255,.07), 0 2px 4px -2px rgba(0,0,0,.55);
}
.dark .badge--white:not(.badge--outline):not(.badge--ghost):not(.badge--gradient):hover,
.dark .badge[data-variant="white"]:not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]):hover {
  background: linear-gradient(135deg, rgb(var(--badge-white-soft) / .98), rgb(var(--badge-white-soft) / .88));
  border-color: rgba(255,255,255,.18);
}
.dark .badge--white.badge--solid,
.dark .badge[data-variant="white"][data-appearance="solid"] {
  --_c: var(--badge-white-soft);
  background: linear-gradient(180deg, rgb(var(--badge-white-soft) / .95), rgb(var(--badge-white-soft) / .80));
  color:#141414;
  box-shadow: 0 0 0 1px rgba(255,255,255,.10),0 2px 5px -2px rgba(0,0,0,.55);
}
.dark .badge--white.badge--solid:hover,
.dark .badge[data-variant="white"][data-appearance="solid"]:hover { background: linear-gradient(180deg, rgb(var(--badge-white-soft) / .98), rgb(var(--badge-white-soft) / .85)); }
.dark .badge--white.badge--outline,
.dark .badge[data-variant="white"][data-appearance="outline"] {
  color:#e6e6e6;
  border-color: rgba(255,255,255,.32);
}
.dark .badge--white.badge--outline:hover,
.dark .badge[data-variant="white"][data-appearance="outline"]:hover { background: rgba(255,255,255,.06); }
.dark .badge--white.badge--ghost,
.dark .badge[data-variant="white"][data-appearance="ghost"] { color:#cfcfcf; }
.dark .badge--white.badge--ghost:hover,
.dark .badge[data-variant="white"][data-appearance="ghost"]:hover { background: rgba(255,255,255,.10); color:#f5f5f5; }

/* 降低发光层对 white 在暗色下的刺眼度 */
.dark .badge--white::after,
.dark .badge[data-variant="white"]::after { opacity:.22; }

/* ================= Black 变体美化（soft 默认态） ================= */
/* 非指定外观 (solid / outline / ghost / gradient) 时走精细黑胶质风格 */
.badge--black:not(.badge--solid):not(.badge--outline):not(.badge--ghost):not(.badge--gradient),
.badge[data-variant="black"]:not([data-appearance="solid"]):not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]) {
  background: linear-gradient(155deg,#121212 0%,#1c1c1c 55%,#242424 100%);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.04),
    0 1px 2px -1px rgba(0,0,0,.7),
    0 3px 6px -2px rgba(0,0,0,.6),
    0 0 0 4px rgba(0,0,0,.25) inset,
    0 0 0 1px rgba(255,255,255,.04) inset;
  color: #fff;
}
.badge--black:not(.badge--solid):not(.badge--outline):not(.badge--ghost):not(.badge--gradient):hover,
.badge[data-variant="black"]:not([data-appearance="solid"]):not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]):hover {
  background: linear-gradient(155deg,#181818 0%,#232323 55%,#2d2d2d 100%);
  border-color: rgba(255,255,255,.12);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.06),
    0 2px 6px -2px rgba(0,0,0,.75),
    0 4px 10px -3px rgba(0,0,0,.6),
    0 0 0 4px rgba(0,0,0,.28) inset,
    0 0 0 1px rgba(255,255,255,.06) inset;
}

/* Outline 外观下做轻描边提亮 */
.badge--black.badge--outline,
.badge[data-variant="black"][data-appearance="outline"] {
  border-color: rgba(255,255,255,.28);
  color: #fff;
  box-shadow: 0 0 0 1px rgba(255,255,255,.28);
}
.badge--black.badge--outline:hover,
.badge[data-variant="black"][data-appearance="outline"]:hover {
  border-color: rgba(255,255,255,.4);
  background: rgba(255,255,255,.04);
}

/* Ghost 保留极简 */
.badge--black.badge--ghost,
.badge[data-variant="black"][data-appearance="ghost"] { color:#fff; }
.badge--black.badge--ghost:hover,
.badge[data-variant="black"][data-appearance="ghost"]:hover { background: rgba(255,255,255,.07); }

/* Gradient 使用黑到深灰 + 细亮边 */
.badge--black.badge--gradient,
.badge[data-variant="black"][data-appearance="gradient"] {
  background: linear-gradient(130deg,#0f0f0f,#262626 55%,#1a1a1a);
  box-shadow: 0 0 0 1px rgba(255,255,255,.08),0 4px 10px -2px rgba(0,0,0,.65);
}

/* Solid 轻微提升层次 */
.badge--black.badge--solid,
.badge[data-variant="black"][data-appearance="solid"] {
  background: linear-gradient(180deg,#111,#000);
  box-shadow: 0 0 0 1px rgba(255,255,255,.10),0 2px 6px -2px rgba(0,0,0,.8);
}
.badge--black.badge--solid:hover,
.badge[data-variant="black"][data-appearance="solid"]:hover {
  background: linear-gradient(180deg,#161616,#050505);
}

/* ================ 可点击交互 (class 或 data-clickable) ================ */
.badge--clickable,
.badge[data-clickable] {
  cursor: pointer;
  position: relative;
  transition: background .25s ease, box-shadow .25s ease, transform .15s ease;
}
.badge--clickable:active,
.badge[data-clickable]:active { transform: translateY(1px); }
.badge--clickable:focus-visible,
.badge[data-clickable]:focus-visible { outline:none; box-shadow:0 0 0 2px var(--vp-c-bg-soft),0 0 0 5px rgb(var(--_c)/.55); }
/* 统一 hover 亮度（不破坏原特例） */
.badge--clickable:not(.badge--ghost):hover,
.badge[data-clickable]:not([data-appearance="ghost"]):hover { --_bg-a: calc(var(--_bg-a) + .12); --_bg-b: calc(var(--_bg-b) + .08); }
/* ghost 点击态背景 */
.badge--clickable.badge--ghost:active,
.badge[data-clickable][data-appearance="ghost"]:active { background: rgb(var(--_c)/.18); }

/* 暗色模式下与背景拉开一点层次 */
.dark .badge--black:not(.badge--solid):not(.badge--outline):not(.badge--ghost):not(.badge--gradient),
.dark .badge[data-variant="black"]:not([data-appearance="solid"]):not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]) {
  background: linear-gradient(155deg,#1e1e1e 0%,#262626 55%,#2f2f2f 100%);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.05),
    0 1px 2px -1px rgba(0,0,0,.7),
    0 3px 6px -2px rgba(0,0,0,.65),
    0 0 0 4px rgba(0,0,0,.5) inset,
    0 0 0 1px rgba(255,255,255,.05) inset;
}
.dark .badge--black:not(.badge--solid):not(.badge--outline):not(.badge--ghost):not(.badge--gradient):hover,
.dark .badge[data-variant="black"]:not([data-appearance="solid"]):not([data-appearance="outline"]):not([data-appearance="ghost"]):not([data-appearance="gradient"]):hover {
  background: linear-gradient(155deg,#232323 0%,#2c2c2c 55%,#363636 100%);
  border-color: rgba(255,255,255,.16);
}

/* 自定义 RGB 颜色 (例如 data-rgb="255 105 180") */
.badge[data-rgb] { --_c: attr(data-rgb); }

/* ================ 外观 appearance  ================ */
/* soft (默认) 见基础 */
.badge--solid, .badge[data-appearance="solid"] {
  --_bg-a: 1; --_bg-b: 1; --_txt-alpha: .12; /* 先将文字设为浅色占位 */
  background: rgb(var(--_c));
  color: #fff;
  box-shadow: 0 0 0 1px rgb(var(--_c) / .9), 0 2px 6px -2px rgb(var(--_c) / .55);
}
.badge--outline, .badge[data-appearance="outline"] {
  --_bg-a: 0; --_bg-b: 0; --_txt-alpha: .95; --_outline-alpha: .55; --_shadow-alpha: .15;
  background: transparent;
  border-color: rgb(var(--_c) / .55);
  box-shadow: 0 0 0 1px rgb(var(--_c) / .55);
}
.badge--subtle, .badge[data-appearance="subtle"] {
  --_bg-a: .10; --_bg-b: .04; --_outline-alpha: .25; --_shadow-alpha: .12;
}
.badge--ghost, .badge[data-appearance="ghost"] {
  --_bg-a: 0; --_bg-b: 0; --_outline-alpha: 0; --_shadow-alpha: 0;
  background: transparent; box-shadow: none; border-color: transparent;
}
.badge--gradient, .badge[data-appearance="gradient"] {
  background: linear-gradient(120deg, rgb(var(--_c) / .85), rgb(var(--_c) / .55) 55%, rgb(var(--_c) / .85));
  color: #fff;
  box-shadow: 0 0 0 1px rgb(var(--_c) / .65), 0 4px 10px -2px rgb(var(--_c) / .45);
}

/* Hover 交互（非 ghost 时） */
.badge:not(.badge--ghost):hover,
.badge:not([data-appearance="ghost"]):hover {
  --_bg-a: calc(var(--_bg-a) + .10);
  --_bg-b: calc(var(--_bg-b) + .06);
  --_outline-alpha: .55;
  --_shadow-alpha: .40;
}
.badge--outline:hover, .badge[data-appearance="outline"]:hover {
  background: rgb(var(--_c) / .08);
}
.badge--ghost:hover, .badge[data-appearance="ghost"]:hover {
  background: rgb(var(--_c) / .10);
}

/* ================ 尺寸 size ================ */
.badge--xs, .badge[data-size="xs"] { font-size: 10px; padding: 1px 5px; }
.badge--sm, .badge[data-size="sm"] { font-size: 11px; padding: 2px 6px; }
.badge--md, .badge[data-size="md"] { font-size: 12px; }
.badge--lg, .badge[data-size="lg"] { font-size: 13px; padding: 4px 10px; }

/* ================ 形状 shape ================ */
.badge--round, .badge[data-shape="round"] { border-radius: 10px; }
.badge--square, .badge[data-shape="square"] { border-radius: 6px; }
.badge--pill, .badge[data-shape="pill"] { border-radius: 999px; }

/* 图标插槽（可放 emoji / svg） */
.badge__icon { display: inline-flex; align-items: center; font-size: 1em; line-height: 1; }
/* 若只有图标：紧凑尺寸 */
.badge:has(.badge__icon):not(:has(:not(.badge__icon))) { padding: 4px; aspect-ratio: 1/1; }

/* ================ 焦点无障碍 ================ */
.badge:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--vp-c-bg-soft), 0 0 0 4px rgb(var(--_c) / .65); }

/* ================ 深色模式调和 ================ */
.dark .badge {
  --_bg-a: .22; --_bg-b: .10; --_txt-alpha: .90; --_outline-alpha: .40; --_shadow-alpha: .38;
}
.dark .badge--solid, .dark .badge[data-appearance="solid"] { --_txt-alpha: 1; }
.dark .badge--ghost:hover, .dark .badge[data-appearance="ghost"]:hover { background: rgb(var(--_c) / .18); }

/* 暗色模式下 black 仍保持白字，基础逻辑无需额外覆盖 */

/* 发光层（仅 soft/subtle/gradient 等强调） */
.badge::after {
  content: "";
  position: absolute; inset: 0; border-radius: inherit; pointer-events: none;
  background: radial-gradient(circle at 30% 30%, rgb(var(--_c) / .35), transparent 70%);
  mix-blend-mode: overlay; opacity: .55; transition: opacity .3s ease;
}
.dark .badge::after { mix-blend-mode: plus-lighter; opacity: .42; }
.badge:hover::after { opacity: .85; }
/* 去除不适合的风格的发光 */
.badge--outline::after, .badge--ghost::after, .badge[data-appearance="outline"]::after, .badge[data-appearance="ghost"]::after { display:none; }

/* ================ 集合布局辅助 ================ */
.badges { display: flex; flex-wrap: wrap; gap: 6px; }

/* ================ 高对比度模式 ================ */
@media (prefers-contrast: more) {
  .badge { --_outline-alpha: .70; --_shadow-alpha: .55; }
}

/* ================ 降级（不支持 backdrop-filter） ================ */
@supports not ((backdrop-filter: blur(4px))) {
  .badge { backdrop-filter: none; -webkit-backdrop-filter: none; }
}

/* ================ Markdown 适配 ================ */
table .badge { white-space: nowrap; }
